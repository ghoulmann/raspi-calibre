var webminpath='';var searchVisible=false;var gearsVisible=false;function dirname(path){return path.match(/.*\//)}function basename(path){return path.replace(/.*\//,"")}var myParent=dirname(location.pathname)[0];if(myParent!="/"){var testPath=dirname(myParent.substring(0,myParent.lastIndexOf('/')-1))[0];var testPath1=testPath.substring(0,testPath.lastIndexOf('/'))}if(myParent.indexOf('link.cgi',0)>=0){if(basename(testPath1)=='link.cgi'){webminpath=myParent}else{webminpath=testPath}}else{webminpath=''}function initialize(path){if(path!=''){webminpath=path}var prev_onload=window.onload;window.onload=function(){if(prev_onload!=null){prev_onload()}if($('gearslink')!=undefined){$('gearslink').className=webminGears.status_class()}loadSidebar();new Ajax.Autocompleter("searchfield","searchfield_choices",webminpath+"/search.cgi",{paramName:"Search",minChars:2,afterUpdateElement:openUrl})}}function loadSidebar(){if(Cookie.get('sidebar')=='true'){displaySidebar()}}function switchSidebar(){var sidebarClass=$('contenttable').className;var visible=true;if(sidebarClass=='sidebar-hidden'){visible=false}if(!visible){displaySidebar()}else{hideSidebar()}}function displaySidebar(){refreshSidebar();Cookie.set('sidebar','true',365);$('contenttable').className='sidebar-visible';$('sidebar').className='sidebar-visible';$('sysstats-open').style.display='none'}function hideSidebar(){Cookie.set('sidebar','false',365);$('contenttable').className='sidebar-hidden';$('sidebar').className='sidebar-hidden';$('sysstats-open').style.display='block'}function refreshSidebar(){var sidebarUrl=webminpath+'/sysstats.cgi';new Ajax.Updater('sidebar-info',sidebarUrl,{asynchronous:true})}function viewSearch(){if(!searchVisible){if(gearsVisible){webminGears.message_view()}$('searchbutton').className='search-selected';$('searchform').style.display='block';$('searchfield').focus();searchVisible=true}else{$('searchbutton').className='search-notselected';$('searchform').style.display='none';searchVisible=false}return false}function showLogs(){var url=''+window.location;var sl1=url.indexOf('//');var mod='';if(sl1>0){var sl2=url.indexOf('/',sl1+2);if(sl2>0){var sl3=url.indexOf('/',sl2+1);if(sl3>0){mod=url.substring(sl2+1,sl3)}else{mod=url.substring(sl2+1)}}}var sl4=mod.indexOf('?');if(sl4>=0){mod=mod.substring(0,sl4)}if(mod&&mod.indexOf('.cgi')<=0){document.sfViewModuleLogs.module.value=mod;document.sfViewModuleLogs.submit()}else{document.sfViewAllLogs.submit()}}function openUrl(){var url=webminpath+'/'+$('searchfield').value;document.location.href=url}function donateHide(){var donateUrl=webminpath+'/donate.cgi';new Ajax.Updater('donation',donateUrl,{asynchronous:true})}var Cookie={set:function(name,value,daysToExpire){var expire='';if(daysToExpire!=undefined){var d=new Date();d.setTime(d.getTime()+(86400000*parseFloat(daysToExpire)));expire='; expires='+d.toGMTString()}return(document.cookie=escape(name)+'='+escape(value||'')+expire)},get:function(name){var cookie=document.cookie.match(new RegExp('(^|;)\\s*'+escape(name)+'=([^;\\s]*)'));return(cookie?unescape(cookie[2]):null)},erase:function(name){var cookie=Cookie.get(name)||true;Cookie.set(name,'',-1);return cookie},accept:function(){if(typeof navigator.cookieEnabled=='boolean'){return navigator.cookieEnabled}Cookie.set('_test','1');return(Cookie.erase('_test')==='1')}};webminGears={createStore:function(){if('undefined'==typeof google||!google.gears)return;if('undefined'==typeof localServer){localServer=google.gears.factory.create("beta.localserver")}var manifestUrl=webminpath+'/manifest.cgi';store=localServer.createManagedStore('webminGears');store.manifestUrl=manifestUrl;store.checkForUpdate();this.message()},getPermission:function(){if('undefined'!=typeof google&&google.gears){if(!google.gears.factory.hasPermission){google.gears.factory.getPermission('webminGears','/theme-stressfree/images/webminlogo.gif')}try{this.createStore()}catch(e){}}},message_version:function(){var t=this,msg4=$('gears-msg4'),mfver=$('mfver');msg4.style.display=store.currentVersion?'block':'none';if(mfver)mfver.innerHTML=store.currentVersion},message:function(show){var t=this,msg1=$('gears-msg1'),msg2=$('gears-msg2'),msg3=$('gears-msg3'),num=$('gears-upd-number'),wait=$('gears-wait');var msg4=$('gears-msg4'),mfver=$('mfver');if(!msg1)return;if('undefined'!=typeof google&&google.gears){if(google.gears.factory.hasPermission){msg1.style.display=msg2.style.display='none';msg3.style.display='block';if('undefined'==typeof store)t.createStore();store.oncomplete=function(){wait.innerHTML=' <strong>update completed..</strong>';t.message_version()};store.onerror=function(){wait.innerHTML=' <br /><strong>error:</strong>'+store.lastErrorMessage+'<br />';t.message_version()};store.onprogress=function(e){if(msg4.style.display!='block')t.message_version();if(num)num.innerHTML=(' '+e.filesComplete+' / '+e.filesTotal)}}else{msg1.style.display=msg3.style.display=msg4.style.display='none';msg2.style.display='block'}}},message_view:function(){if(searchVisible){viewSearch()}if(!gearsVisible){var t=this;t.message();gearsVisible=true;$('gearsstatus').className='gearsstatus-selected';$('gears-info-box').style.display='block'}else{gearsVisible=false;$('gearsstatus').className='gearsstatus-notselected';$('gears-info-box').style.display='none'}},status_class:function(){var status='gears-disabled';if('undefined'!=typeof google&&google.gears){if(google.gears.factory.hasPermission){status='gears-enabled'}}return status}};(function(){if(window.google&&google.gears){return}var factory=null;if(typeof GearsFactory!='undefined'){factory=new GearsFactory()}else{try{factory=new ActiveXObject('Gears.Factory');if(factory.getBuildInfo().indexOf('ie_mobile')!=-1){factory.privateSetGlobalObject(this)}}catch(e){if((typeof navigator.mimeTypes!='undefined')&&navigator.mimeTypes["application/x-googlegears"]){factory=document.createElement("object");factory.style.display="none";factory.width=0;factory.height=0;factory.type="application/x-googlegears";document.documentElement.appendChild(factory)}}}if(!factory){return}if(!window.google||'undefined'==typeof google){google={}}if(!google.gears){google.gears={factory:factory}}})();